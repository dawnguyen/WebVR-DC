<!DOCTYPE html>
<html>

<head>
  <title>demo</title>
  <link rel="stylesheet" type="text/css" href="main.css">
  <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.min.js"></script>
  <script src="set-image.js"></script>
  <script src="main.js"></script>
</head>

<body>
  <div id="splash">
    <div class="loading"></div>
    <div class="start-button">Start Your Journey</div>
    <div class="credits">
      <div class="wrapper"> <a class="show-credits" href="#">Model Credits</a>
        <ul class="credits-list">
          <li><a href="" target="_blank">DC-Corelogic-Downstream</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <a-scene fog="color: #6b789b; far: 0; type: linear;" shadow="receive: true; cast: true;">
    <a-assets>
      <a-asset-item id="popup-img" src="assets/img/trialpopup.png"></a-asset-item>
      <a-asset-item id="house-mtl" src="assets/HouseOBJ.mtl"></a-asset-item>
      <a-asset-item id="house-obj" src="assets/HouseOBJ.obj"></a-asset-item>
      <a-asset-item id="corelogicmodel-mtl" src="assets/corelogicmodel_center.mtl"></a-asset-item>
      <a-asset-item id="corelogicmodel-obj" src="assets/corelogicmodel_center.obj"></a-asset-item>
      <a-asset-item id="corelogicscreen1-mtl" src="assets/corelogicmodel_1stscreen.mtl"></a-asset-item>
      <a-asset-item id="corelogicscreen1-obj" src="assets/corelogicmodel_1stscreen.obj"></a-asset-item>
      <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
      <img id="original" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/thumb-sechelt.jpg">
      <img id="trial" src="assets/img/trialbtn.png">
      <img id="sky-img" src="assets/sky.jpg">

      <!-- Image link template to be reused. -->
      <script id="link" type="text/html">
        <a-entity class="link"
            geometry="primitive: plane; height: 1; width: 1"
            material="shader: flat;opacity: 0.9; src: ${thumb}"
            event-set__1="_event: mousedown; scale: 1 1 1"
            event-set__2="_event: mouseup; scale: 1.2 1.2 1.2"
            event-set__3="_event: mouseenter; scale: 1.2 1.2 1.2"
            event-set__4="_event: mouseleave; scale: 1 1 1"
            set-image="on: click; target: #popup; mtl: ${src}"
            sound="on: click; src: #click-sound"></a-entity>

        </script>

    </a-assets>

    <a-entity id="main-camera-wrapper" position="50 6 7" rotation="0 -30 0">
      <a-camera id="main-camera" user-height="0" visible="true" universal-controls="acceleration: 75; easing: 10; enabled: true; fly: false;" cursor="rayOrigin: mouse;" raycaster="objects: .clickable; interval: 1;">
        <a-cursor id="cursor" event-set__4="_event: mouseleave; color: black;" event-set__3="_event: mouseenter; color: springgreen;" fuse="true" raycaster="objects: .link">
          <a-animation begin="click" easing="ease-in" attribute="scale" dur="150" fill="forwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
          <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="800" fill="backwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
        </a-cursor>
      </a-camera>

    </a-entity>

    <a-obj-model id="obj-model" position="0 0 0" rotation="0 0 0" scale="0.1 0.1 0.1" obj-model="obj: #corelogicmodel-obj;mtl: #corelogicmodel-mtl;" material="color: #ffffff; opacity: 1; shader: standard; side: double; metalness: 0; roughness: 1; repeat: 1 1;"
      shadow="cast: true; receive: true;" visible="true"></a-obj-model>
      <a-entity id="popup" scale="0.1 0.1 0.1" obj-model="obj:#corelogicscreen1-obj;mtl:#corelogicscreen1-mtl" src="#city"></a-entity>
      <a-obj-model id="sample" position="47.20686 2.04674 -10.27632" rotation="0 135 0" scale="0.08 0.11 0.04" obj-model="obj:assets/HouseOBJ.obj;mtl:assets/HouseOBJ.mtl" material="color:#dbd3ff;side:double;roughness:1;metalnessTextureOffset:8.41 0;metalnessTextureRepeat:3.47 2.4;npot:true" shadow=""></a-obj-model>

    <a-entity  template="src: #link" data-src="#popup-img" data-thumb="#trial" position="38.603 6 -8.632" rotation="0 30 0" scale="1 1 1" material="transparent:true"></a-entity>
    <a-sky id="sky" rotation="0 60 0" geometry="radius: 5000; segmentsHeight: 20; segmentsWidth: 64;" material="color: #aaa; flatShading: true; opacity: 1; repeat: 1 1; shader: flat; side: double;src: #sky-img;" position="0 0 0" rotation="0 0 0"
      scale="-1 1 1" shadow="receive: true; cast: true;" visible="true"></a-sky>
    <a-light type="ambient" color="#222" position="-7.76096 3.68286 3.25508" light="type:directional;color:#8598bd;intensity:0.5;groundColor:#fff7ad;castShadow:true;shadowMapHeight:513.87;decay:0;shadowCameraFov:0;shadowCameraFar:0;shadowCameraBottom:0;shadowCameraLeft:0;shadowCameraNear:0;shadowCameraRight:0;shadowCameraTop:0"
      rotation="45 0 0" scale="0.00001 1 1"></a-light>
    <a-light type="ambient" color="#222" position="0 8.706 0" light="type:hemisphere;color:#d9e7ff;shadowCameraFov:0;intensity:1.02"></a-light>

  </a-scene>
</body>

</html>
